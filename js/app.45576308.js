(function(){"use strict";var t={9659:function(t,e,o){var a=o(3751),i=o(641);function r(t,e,o,a,r,n){const s=(0,i.g2)("Intro"),l=(0,i.g2)("OverView"),c=(0,i.g2)("DemographicRace"),d=(0,i.g2)("MapSection"),h=(0,i.g2)("Outro");return(0,i.uX)(),(0,i.CE)(i.FK,null,[e[0]||(e[0]=(0,i.Lk)("link",{rel:"stylesheet",href:"https://use.typekit.net/zik1lgr.css"},null,-1)),(0,i.Lk)("section",null,[(0,i.bF)(s)]),(0,i.Lk)("section",null,[(0,i.bF)(l,{jsonData:r.jsonData},null,8,["jsonData"])]),(0,i.Lk)("section",null,[(0,i.bF)(c,{jsonData:r.jsonData,demographicData:r.demographicData},null,8,["jsonData","demographicData"])]),(0,i.Lk)("section",null,[(0,i.bF)(d,{jsonData:r.jsonData,geojsonData:r.geojsonData,demographicData:r.demographicData},null,8,["jsonData","geojsonData","demographicData"])]),(0,i.Lk)("section",null,[(0,i.bF)(h)]),e[1]||(e[1]=(0,i.Lk)("footer",null,null,-1))],64)}var n=o(2896);function s(t,e,o,a,r,n){return e[0]||(e[0]=(0,i.Fv)('<div data-v-561b09c6><img src="img/title_img.png" width="80%" data-v-561b09c6></div><div style="height:100vh;position:sticky;top:0;" data-v-561b09c6><img src="img/stores.png" width="100%" style="position:absolute;transform:translate(-50%, 0%);bottom:0;left:50%;z-index:1;" data-v-561b09c6></div><div class="scroll" data-v-561b09c6><p class="textbox" data-v-561b09c6> If you live in the city, going to the grocery store is a part of life—whether you enjoy it or not. But have you ever really looked at the signs? Noticed something unusual? Felt drawn to one in particular? These signs tell a story more than you think. </p><p class="textbox" data-v-561b09c6> For me, exploring grocery stores is a way to understand a place, what people eat and how they live. In NYC, there are almost 10,000 grocery stores, each reflecting different foods, cuisines, and cultures. <br data-v-561b09c6> Let’s take a closer look. </p><p class="textbox" data-v-561b09c6>What we will explore on grocery store signs</p><img src="img/explain-sign.png" width="60%" style="margin-top:-320px;transform:translate(-50%, 0%);margin-left:50%;z-index:0;" data-v-561b09c6><p class="textbox" data-v-561b09c6> These are the key elements of brand identity that shape how a store, But beyond branding, do these signs also reflect the anything else? </p></div>',3))}var l={name:"IntroSection",props:{text:String}},c=o(6262);const d=(0,c.A)(l,[["render",s],["__scopeId","data-v-561b09c6"]]);var h=d;const u={class:"overview-layout"},p={class:"key-elements"},g={key:1};function m(t,e,o,a,r,n){const s=(0,i.g2)("HighLights"),l=(0,i.g2)("WordsSection"),c=(0,i.g2)("VisualChart"),d=(0,i.g2)("ImageCluster");return(0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(s,{highlights:r.highlights,onUpdateActiveWord:n.handleActiveWord},null,8,["highlights","onUpdateActiveWord"]),(0,i.Lk)("div",p,[n.isVisualOrAfter?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(c,{containerId:"stacked-bar-chart-fonts",type:"fonts",jsonData:o.jsonData,activeTitle:r.activeTitle},null,8,["jsonData","activeTitle"]),(0,i.bF)(c,{containerId:"stacked-bar-chart-colors",type:"colors",jsonData:o.jsonData,activeTitle:r.activeTitle},null,8,["jsonData","activeTitle"])])):((0,i.uX)(),(0,i.Wv)(l,{key:0,jsonData:o.jsonData,activeTitle:r.activeTitle},null,8,["jsonData","activeTitle"])),(0,i.bF)(d,{jsonData:o.jsonData,selectedWord:r.selectedWord},null,8,["jsonData","selectedWord"])])])}o(8992),o(7550);var f=o(33);const v={class:"word-container"};function b(t,e,o,a,r,n){return(0,i.uX)(),(0,i.CE)("div",v,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.filteredWords,(t=>((0,i.uX)(),(0,i.CE)("span",{key:t["Name Words"],class:(0,f.C4)(["word",{wordhighlight:(n.activeWords||[]).some((e=>e?.toLowerCase()===t["Name Words"]?.toLowerCase()))}]),style:(0,f.Tr)({fontSize:t["Store Count"]*o.fontSizeMultiplier+"px"})},(0,f.v_)(t["Name Words"]),7)))),128))])}o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698),o(4520),o(3949),o(1454);var y=o(8771),D={name:"WordsSection",props:{jsonData:{type:Array,required:!0},activeTitle:{type:[String,Array],required:!1,default:null},fontSizeMultiplier:{type:Number,required:!1,default:.5},minStoreCount:{type:Number,required:!1,default:10}},computed:{filteredWords(){const t={},e=["grill","ave","avenue","minimarket","st","street","deligrocery","mrkt","mtk","grcy"];return this.jsonData?.forEach((o=>{if(o.words){const a=o.chain,i=new Set(o.words);i.forEach((o=>{y.z.isStopWord(o)||e.includes(o.toLowerCase())||1===o.length&&isNaN(o)||a||(t[o]=(t[o]||0)+1)}))}})),Object.entries(t).filter((([,t])=>t>=this.minStoreCount)).map((([t,e])=>({"Name Words":t,"Store Count":e}))).sort(((t,e)=>e["Store Count"]-t["Store Count"]))},activeWords(){if(!this.activeTitle)return[];const t=Array.isArray(this.activeTitle)?this.activeTitle:[this.activeTitle],e={new:["new","york"],fresh:["fresh","green","organic","natural","farm","healthy","health","farmer","farmers","garden"],stop:["stop","express","fast","convenient","quick","go","grab"],star:["star","super","best","top","great"],lucky:["lucky","happy","famous"],nationality:["halal","kosher","islamic","jewish","chinese","korean","italian","american","latin","mexican","mexicana","caribbean","indian","international","african","usa"],mr:["brothers","bro","brother","bros","son","mr"]},o=e[this.activeTitle?.toLowerCase()];return o||t.map((t=>t.toLowerCase()))},selectedWord(){return this.activeTitle}}};const k=(0,c.A)(D,[["render",b],["__scopeId","data-v-d94c3478"]]);var w=k;const j={class:"image-cluster"},S={ref:"svg",class:"image-svg"},L={ref:"tooltip",class:"tooltip"};function C(t,e,o,a,r,n){return(0,i.uX)(),(0,i.CE)("div",j,[((0,i.uX)(),(0,i.CE)("svg",S,null,512)),(0,i.Lk)("div",L,null,512)])}var A={name:"ImageCluster",props:{jsonData:{type:[String,Array],required:!0},selectedWord:{type:String,default:null},selectedColor:{type:String,default:null},selectedFont:{type:String,default:null},selectedNeighborhood:{type:String,default:null}},computed:{filteredStores(){return this.jsonData.filter((t=>{const e=Array.isArray(this.selectedWord)?this.selectedWord:[this.selectedWord],o=!!this.selectedWord&&e.some((e=>t.words?.includes(e))),a=!!this.selectedWord&&e.some((e=>t.colors?.includes(e))),i=!!this.selectedWord&&e.some((e=>t.fonts?.includes(e))),r=!this.selectedNeighborhood||t.neighborhood===this.selectedNeighborhood,n="Yes"===t.has_sign;return n&&this.selectedWord&&(o||a||i)&&r}))}},mounted(){console.log("jsonData in ImageCluster:",this.jsonData),console.log("selectedWord in ImageCluster:",this.selectedWord),this.createForceSimulation()},watch:{selectedWord(t){console.log("selectedWord changed in ImageCluster:",t),this.createForceSimulation()}},methods:{getImagePath(t){return`/street_view_images/${t.borough}/${t.id}.jpg`},createForceSimulation(){const t=this.$refs.svg.parentElement.offsetWidth,e=600,o=n.Ltv(this.$refs.svg).attr("width",t).attr("height",e),a=n.Ltv(this.$refs.tooltip),i=this.filteredStores.map((o=>({id:o.id,name:o.names,neighborhood:o.neighborhood,borough:o.borough,image:this.getImagePath(o),x:Math.random()*t,y:Math.random()*e})));this.simulation=n.tXi(i.slice(0,100)).force("center",n.jTM(t/2,e/2)).force("charge",n.xJS().strength(10)).force("collision",n.eRw().radius(20)).on("tick",(()=>{o.selectAll("image").data(i).join("image").attr("xlink:href",(t=>t.image)).attr("x",(t=>t.x-20)).attr("y",(t=>t.y-20)).attr("width",80).attr("height",40).attr("loading","lazy").attr("cursor","pointer").on("mouseover",((t,e)=>{a.style("display","block").style("left",`${t.clientX+4}px`).style("top",`${t.clientY+4}px`).html(`<strong>${e.name}</strong><br>Neighborhood: ${e.neighborhood}<br>Borough: ${e.borough}`),n.Ltv(t.target).attr("width",100).attr("height",60)})).on("mouseout",(function(){a.style("display","none"),n.Ltv(this).attr("width",80).attr("height",40)})).on("mousemove",(t=>{a.style("left",`${t.clientX+4}px`).style("top",`${t.clientY+4}px`)}))}))}}};const T=(0,c.A)(A,[["render",C],["__scopeId","data-v-c8e118f8"]]);var F=T;const W={class:"highlights-container"},_={key:0},x={key:1};function N(t,e,o,a,r,n){return(0,i.uX)(),(0,i.CE)("div",W,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.highlights,(t=>((0,i.uX)(),(0,i.CE)("div",{class:"highlight",key:t.title},[t.isH1?((0,i.uX)(),(0,i.CE)("h1",_,(0,f.v_)(t.title),1)):((0,i.uX)(),(0,i.CE)("h2",x,(0,f.v_)(t.title),1)),(0,i.Lk)("p",null,(0,f.v_)(t.content),1)])))),128))])}var I=o(9700),E=o.n(I),O={name:"HighLight",props:{highlights:{type:Array,required:!0}},data(){return{scroller:null}},mounted(){this.initScrollama()},methods:{initScrollama(){this.scroller=E()(),this.scroller.setup({step:".highlight",offset:.8,debug:!1}).onStepEnter((({element:t})=>{const e=t.querySelector("h1, h2"),o=e?.textContent?.toLowerCase()?.trim();o?this.$emit("update-active-word",o):console.warn("Title is undefined or empty")}))}}};const M=(0,c.A)(O,[["render",N],["__scopeId","data-v-59366c8b"]]);var P=M;const $=["id"];function B(t,e,o,a,r,n){return(0,i.uX)(),(0,i.CE)("div",{id:o.containerId,class:"stacked-bar-chart"},null,8,$)}o(8872);var V={name:"VisualChart",props:{containerId:{type:String,required:!0},type:{type:String,required:!0},jsonData:{type:Array,required:!0},activeTitle:{type:String,required:!1,default:null},width:{type:Number,default:800}},watch:{jsonData:{handler(t){this.createStackedBarChart(t)},immediate:!0},activeTitle:{immediate:!0,handler(){this.createStackedBarChart()}}},mounted(){this.createStackedBarChart()},methods:{createStackedBarChart(){n.Ltv(`#${this.containerId}`).selectAll("*").remove();const t=this.jsonData.reduce(((t,e)=>(e[this.type]&&e[this.type].forEach((e=>{t[e]=(t[e]||0)+1})),t)),{}),e=Object.entries(t).map((([t,e])=>({name:t,value:e}))).sort(((t,e)=>e.value-t.value)),o=this.width,a=50,i={top:10,right:10,bottom:10,left:0},r=n.Ltv(`#${this.containerId}`).append("svg").attr("width",o+i.left+i.right).attr("height",a+i.top+i.bottom).append("g").attr("transform",`translate(${i.left},${i.top})`),s=n.m4Y().domain([0,n.czq(e,(t=>t.value))]).range([0,o]);let l=0;e.forEach((t=>{const e=s(t.value);r.append("rect").attr("x",s(l)).attr("y",0).attr("width",e).attr("height",a-10).attr("fill","colors"===this.type?t.name?.toLowerCase():t.name?.toLowerCase()===this.activeTitle?"yellow":"white").attr("stroke",t.name?.toLowerCase()===this.activeTitle?.toLowerCase()?"#000":"#ccc").attr("stroke-width",t.name?.toLowerCase()===this.activeTitle?.toLowerCase()?2:1),"colors"!==this.type&&r.append("text").attr("x",s(l)+e/2).attr("y",(a-10)/2).attr("dy",".35em").attr("text-anchor","middle").text(t.name).style("fill",t.name?.toLowerCase()===this.activeTitle?.toLowerCase()?"red":"black").style("font-size","12px").style("pointer-events","none"),l+=t.value}))}}};const X=(0,c.A)(V,[["render",B],["__scopeId","data-v-c78d6116"]]);var z=X,q={name:"OverView",components:{WordsSection:w,ImageCluster:F,HighLights:P,VisualChart:z},props:{jsonData:{type:Array,required:!0}},data(){return{activeTitle:null,selectedWord:"new",highlights:[{title:"TEXTUAL",content:"What we see in the words...",isH1:!0},{title:"NEW",content:"Of course it's in New York...",isH1:!1},{title:"FRESH",content:"Even if Americans are not...",isH1:!1},{title:"STOP",content:"Another group of words...",isH1:!1},{title:"STAR",content:"Star, Super, Best, Top...",isH1:!1},{title:"Lucky",content:"The word lucky has been used...",isH1:!1},{title:"Mr",content:"Bro, Brother, Bros, Son, Mr...",isH1:!1},{title:"Nationality",content:"Besides the street name...",isH1:!1},{title:"VISUAL",content:"What we see in the colors...",isH1:!0},{title:"Green",content:"The colors used in the stores...",isH1:!1},{title:"Script",content:"The fonts used in the stores...",isH1:!1},{title:"Complimentary",content:"The complimentary colors...",isH1:!1}]}},watch:{activeTitle(t){"visual"===t&&console.log("Switched to visual mode")}},methods:{handleActiveWord(t){this.activeTitle=t.toLowerCase(),this.isVisualOrAfter?"visual"===t.toLowerCase()?this.selectedWord="default-font":"green"===t.toLowerCase()?this.selectedWord="Green":"script"===t.toLowerCase()?this.selectedWord="Script":this.selectedWord=null:this.selectedWord=t,console.log(`Active title updated to: ${this.activeTitle}`),console.log(`Selected word updated to: ${this.selectedWord}`)}},computed:{isVisualOrAfter(){const t=this.highlights.findIndex((t=>"visual"===t.title.toLowerCase())),e=this.highlights.findIndex((t=>t.title.toLowerCase()===this.activeTitle));return e>=t}}};const H=(0,c.A)(q,[["render",m],["__scopeId","data-v-65d3d7be"]]);var G=H;function J(t,e,o,a,r,n){const s=(0,i.g2)("WordsSection"),l=(0,i.g2)("VisualChart");return(0,i.uX)(),(0,i.CE)("div",null,[e[0]||(e[0]=(0,i.Lk)("p",{class:"textbox"},[(0,i.eW)(" If we look into the demographic in each neighborhood by race, some elements are interesting. "),(0,i.Lk)("br"),(0,i.eW)(" These are grouped by the percentage of race in each neighborhood that has more than 50% of the population. ")],-1)),e[1]||(e[1]=(0,i.Lk)("h2",null,"Hispanic",-1)),(0,i.bF)(s,{jsonData:n.getFilteredData("Hsp_P"),minStoreCount:20,fontSizeMultiplier:1.2},null,8,["jsonData"]),e[2]||(e[2]=(0,i.Lk)("h2",null,"Black",-1)),(0,i.bF)(s,{jsonData:n.getFilteredData("Bl_P"),minStoreCount:12,fontSizeMultiplier:1.2},null,8,["jsonData"]),e[3]||(e[3]=(0,i.Lk)("h2",null,"White",-1)),(0,i.bF)(s,{jsonData:n.getFilteredData("Wt_P"),minStoreCount:12,fontSizeMultiplier:1.2},null,8,["jsonData"]),e[4]||(e[4]=(0,i.Lk)("h2",null,"Asian",-1)),(0,i.bF)(s,{jsonData:n.getFilteredData("Asn_P"),minStoreCount:3,fontSizeMultiplier:2.2},null,8,["jsonData"]),e[5]||(e[5]=(0,i.Lk)("p",{class:"textbox"}," what about the visual? the fonts style in these group of neighborhood ",-1)),e[6]||(e[6]=(0,i.Lk)("h2",null,"Hispanic",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-fonts-hp",type:"fonts",jsonData:n.getFilteredData("Hsp_P")},null,8,["jsonData"]),e[7]||(e[7]=(0,i.Lk)("h2",null,"Black",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-fonts-bl",type:"fonts",jsonData:n.getFilteredData("Bl_P")},null,8,["jsonData"]),e[8]||(e[8]=(0,i.Lk)("h2",null,"White",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-fonts-wt",type:"fonts",jsonData:n.getFilteredData("Wt_P")},null,8,["jsonData"]),e[9]||(e[9]=(0,i.Lk)("h2",null,"Asian",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-fonts-as",type:"fonts",jsonData:n.getFilteredData("Asn_P")},null,8,["jsonData"]),e[10]||(e[10]=(0,i.Lk)("p",{class:"textbox"}," what about the visual? the colors in these group of neighborhood ",-1)),e[11]||(e[11]=(0,i.Lk)("h2",null,"Hispanic",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-colors-hp",type:"colors",jsonData:n.getFilteredData("Hsp_P")},null,8,["jsonData"]),e[12]||(e[12]=(0,i.Lk)("h2",null,"Black",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-colors-bl",type:"colors",jsonData:n.getFilteredData("Bl_P")},null,8,["jsonData"]),e[13]||(e[13]=(0,i.Lk)("h2",null,"White",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-colors-wt",type:"colors",jsonData:n.getFilteredData("Wt_P")},null,8,["jsonData"]),e[14]||(e[14]=(0,i.Lk)("h2",null,"Asian",-1)),(0,i.bF)(l,{containerId:"stacked-bar-chart-colors-as",type:"colors",jsonData:n.getFilteredData("Asn_P")},null,8,["jsonData"])])}var R={name:"DemographicRace",components:{WordsSection:w,VisualChart:z},props:{containerId:{type:String,required:!0},type:{type:String,required:!0},demographicData:{type:Array,required:!0,default:()=>[]},jsonData:{type:Array,required:!0,default:()=>[]}},methods:{getFilteredData(t){if(!this.demographicData||!this.jsonData)return console.warn("demographicData or jsonData is not available."),[];const e=this.demographicData.filter((e=>parseFloat(e[t])>50)).map((t=>t.GeoID)),o=this.jsonData.filter((t=>e.includes(t.NTA2020)));return o}}};const Y=(0,c.A)(R,[["render",J],["__scopeId","data-v-5c83086e"]]);var U=Y;const K={class:"map-section"},Z={id:"map-controller"},Q={class:"filter-buttons"},tt=["onClick"],et={class:"filter-buttons"},ot=["onClick"],at={id:"neighborhood-map"},it={ref:"svg",style:{width:"100%",height:"100%"}},rt={ref:"tooltip",class:"tooltip",style:{display:"none"}};function nt(t,e,o,r,n,s){const l=(0,i.g2)("MapSidebar");return(0,i.uX)(),(0,i.CE)(i.FK,null,[e[2]||(e[2]=(0,i.Lk)("p",{class:"textbox"}," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Tempore beatae obcaecati recusandae sapiente sunt dolorum, illum praesentium quisquam voluptas nihil voluptate officia aut nobis veniam libero dolorem rerum? Ab, animi. ",-1)),(0,i.Lk)("div",K,[(0,i.Lk)("div",Z,[e[0]||(e[0]=(0,i.Lk)("h3",null,"Filter by Fonts",-1)),(0,i.Lk)("div",Q,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.fonts,(t=>((0,i.uX)(),(0,i.CE)("button",{key:t,onClick:e=>s.highlightByFont(t),class:(0,f.C4)({selected:n.selectedFilter===t})},(0,f.v_)(t),11,tt)))),128))]),e[1]||(e[1]=(0,i.Lk)("h3",null,"Filter by Colors",-1)),(0,i.Lk)("div",et,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.colors,(t=>((0,i.uX)(),(0,i.CE)("button",{key:t,onClick:e=>s.highlightByColor(t),class:(0,f.C4)({selected:n.selectedFilter===t})},(0,f.v_)(t),11,ot)))),128))])]),(0,i.Lk)("div",at,[((0,i.uX)(),(0,i.CE)("svg",it,null,512))]),(0,i.Lk)("div",rt,null,512),(0,i.bo)((0,i.bF)(l,{ref:"mapSidebar",isVisible:n.sidebarVisible,title:n.sidebarTitle,content:n.sidebarContent,filteredData:n.filteredNeighborhoodData,demographicData:n.filteredDemographicData,geojsonData:o.geojsonData,onClose:s.closeSidebar},null,8,["isVisible","title","content","filteredData","demographicData","geojsonData","onClose"]),[[a.aG,n.sidebarVisible]])])],64)}o(2577);const st={class:"sidebar"},lt={key:0,class:"demographic-data"};function ct(t,e,o,r,n,s){const l=(0,i.g2)("WordsSection"),c=(0,i.g2)("VisualChart");return(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",st,[(0,i.Lk)("button",{class:"close-button",onClick:e[0]||(e[0]=e=>t.$emit("close"))},"×"),(0,i.Lk)("h3",null,(0,f.v_)(o.title),1),(0,i.Lk)("p",null,(0,f.v_)(o.content),1),(0,i.Lk)("p",null,[e[1]||(e[1]=(0,i.Lk)("strong",null,"Store Count:",-1)),(0,i.eW)(" "+(0,f.v_)(s.storeCount),1)]),e[11]||(e[11]=(0,i.Lk)("div",{id:"mapbox-sidebar",class:"mapbox-sidebar"},null,-1)),(0,i.bF)(l,{jsonData:o.filteredData,minStoreCount:1,fontSizeMultiplier:10},null,8,["jsonData"]),(0,i.bF)(c,{containerId:"sidebar-visual-chart-fonts",type:"fonts",jsonData:o.filteredData,width:s.sidebarWidth},null,8,["jsonData","width"]),(0,i.bF)(c,{containerId:"sidebar-visual-chart-colors",type:"colors",jsonData:o.filteredData,width:s.sidebarWidth},null,8,["jsonData","width"]),o.demographicData?((0,i.uX)(),(0,i.CE)("div",lt,[e[10]||(e[10]=(0,i.Lk)("h4",null,"Demographics",-1)),(0,i.Lk)("p",null,[e[2]||(e[2]=(0,i.Lk)("strong",null,"Population:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Pop),1)]),(0,i.Lk)("p",null,[e[3]||(e[3]=(0,i.Lk)("strong",null,"Median Age:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.MdAge),1)]),(0,i.Lk)("p",null,[e[4]||(e[4]=(0,i.Lk)("strong",null,"Under 18:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.PopU18),1)]),(0,i.Lk)("p",null,[e[5]||(e[5]=(0,i.Lk)("strong",null,"65 and Older:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Pop65pl),1)]),(0,i.Lk)("p",null,[e[6]||(e[6]=(0,i.Lk)("strong",null,"Hispanic Population:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Hsp_E)+" ("+(0,f.v_)(o.demographicData.Hsp_P)+"%) ",1)]),(0,i.Lk)("p",null,[e[7]||(e[7]=(0,i.Lk)("strong",null,"White Population:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Wt_E)+" ("+(0,f.v_)(o.demographicData.Wt_P)+"%) ",1)]),(0,i.Lk)("p",null,[e[8]||(e[8]=(0,i.Lk)("strong",null,"Black Population:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Bl_E)+" ("+(0,f.v_)(o.demographicData.Bl_P)+"%) ",1)]),(0,i.Lk)("p",null,[e[9]||(e[9]=(0,i.Lk)("strong",null,"Asian Population:",-1)),(0,i.eW)(" "+(0,f.v_)(o.demographicData.Asn_E)+" ("+(0,f.v_)(o.demographicData.Asn_P)+"%) ",1)])])):(0,i.Q3)("",!0)],512)),[[a.aG,o.isVisible]])}var dt=o(842),ht=o.n(dt),ut={name:"MapSidebar",components:{WordsSection:w,VisualChart:z},props:{isVisible:{type:Boolean,required:!0},title:{type:String,required:!0},content:{type:String,required:!0},filteredData:{type:Array,required:!0},demographicData:{type:Object,required:!1},geojsonData:{type:Object,required:!0}},data(){return{map:null}},computed:{sidebarWidth(){return 400},storeCount(){return this.filteredData.length}},watch:{isVisible(t){console.log("isVisible changed:",t),t&&this.initializeMap()},filteredData(t){console.log("filteredData updated:",t),this.zoomToNeighborhood()}},methods:{initializeMap(){this.map||(ht().accessToken="pk.eyJ1IjoibW9uc2ljaGEiLCJhIjoiY2t1Z2Z2MXV1MjNtYzJucXBjYmwxNnpkNSJ9.e2G2z3OlPked0RO2kHnWlw",this.map=new(ht().Map)({container:"mapbox-sidebar",style:"mapbox://styles/mapbox/light-v11",center:[-74.006,40.7128],zoom:20}),this.map.on("load",(()=>{console.log("Map loaded"),this.map.addSource("neighborhoods",{type:"geojson",data:this.geojsonData}),this.map.addLayer({id:"neighborhoods-layer",type:"fill",source:"neighborhoods",paint:{"fill-color":"#888888","fill-opacity":.4}}),this.map.addLayer({id:"neighborhoods-border",type:"line",source:"neighborhoods",paint:{"line-color":"#000","line-width":1}}),this.zoomToNeighborhood()})))},zoomToNeighborhood(){if(!this.map)return void console.error("Map instance is not initialized.");if(!this.filteredData||0===this.filteredData.length)return void console.log("No filtered data available.");const t=this.filteredData[0].NTA2020;console.log("Selected NTA2020:",t);const e=this.geojsonData.features.find((e=>e.properties.NTA2020===t));if(console.log("Selected Feature:",e),e){const t=e.geometry.coordinates[0];console.log("Feature Coordinates:",t);const o=t.reduce(((t,e)=>Array.isArray(e)&&2===e.length?[Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[2],e[0]),Math.max(t[3],e[1])]:(console.error("Invalid coordinate:",e),t)),[1/0,1/0,-1/0,-1/0]);if(o.includes(1/0)||o.includes(-1/0))return void console.error("Invalid bounds calculated:",o);this.map.fitBounds(o,{padding:20}),this.addStoreLocations()}else console.log("Feature not found for NTA2020:",t)},addStoreLocations(){if(!this.map)return void console.error("Map instance is not initialized.");if(!this.filteredData||0===this.filteredData.length)return void console.log("No filtered data available for stores.");const t=this.filteredData.map((t=>({type:"Feature",geometry:{type:"Point",coordinates:[t.lon,t.lat]},properties:{id:t.id,borough:t.borough,name:t.names||"Unknown Store"}})));if(this.map.getSource("store-locations"))this.map.getSource("store-locations").setData({type:"FeatureCollection",features:t});else{this.map.addSource("store-locations",{type:"geojson",data:{type:"FeatureCollection",features:t}}),this.map.addLayer({id:"store-locations-layer",type:"circle",source:"store-locations",paint:{"circle-radius":4,"circle-color":"#000"}});let e=null,o=null;this.map.on("mouseenter","store-locations-layer",(t=>{const a=t.features[0].geometry.coordinates.slice(),{id:i,borough:r,name:n}=t.features[0].properties,s=`/street_view_images/${r}/${i}.jpg`;o&&(clearTimeout(o),o=null),e=(new(ht().Popup)).setLngLat(a).setHTML(`\n          <div style="text-align: center;">\n            <strong>${n}</strong>\n            <br />\n            <img src="${s}" alt="${n}" style="width: 200px; height: auto;" />\n          </div>\n        `).addTo(this.map)})),this.map.on("mouseleave","store-locations-layer",(()=>{o=setTimeout((()=>{e&&(e.remove(),e=null)}),1e3)}))}}}};const pt=(0,c.A)(ut,[["render",ct],["__scopeId","data-v-16f96e5c"]]);var gt=pt,mt={name:"MapSection",components:{MapSidebar:gt},props:{geojsonData:{type:Object,required:!0},jsonData:{type:Array,required:!0},demographicData:{type:Array,required:!1}},data(){return{fonts:["Script","Decorative","Serif","Sans-serif"],colors:["Red","Blue","Green","Yellow","Pink","Purple","Brown","White","Black"],sidebarVisible:!1,sidebarTitle:"",sidebarContent:"",filteredNeighborhoodData:[],filteredDemographicData:null,selectedNTA:null,selectedFilter:null}},mounted(){console.log("isVisible prop in MapSidebar (on mount):",this.isVisible)},watch:{geojsonData:{handler(t){t&&this.renderGeoJSON()},immediate:!0},filteredGeoJSON:{handler(){this.renderGeoJSON()}},isVisible(t){console.log("isVisible changed:",t),t&&this.initializeMap()}},methods:{renderGeoJSON(){if(!this.geojsonData||!this.geojsonData.features)return void console.error("GeoJSON data is not available or invalid.");const t=n.Ltv(this.$refs.svg);t.selectAll("*").remove();const e=t.node().getBoundingClientRect().width,o=t.node().getBoundingClientRect().height,a=n.bAh().fitSize([e,o],this.geojsonData),i=n.zFW().projection(a);t.selectAll("path").data(this.geojsonData.features).enter().append("path").attr("d",i).attr("fill","#ccc").attr("stroke","#333").attr("stroke-width",.5).attr("data-nta",(t=>t.properties.NTA2020)).attr("cursor","pointer").on("mouseover",((t,e)=>{n.Ltv(t.currentTarget).attr("stroke-width",2),this.handleTooltip(t,e)})).on("mousemove",((t,e)=>{this.handleTooltip(t,e)})).on("mouseout",((t,e)=>{n.Ltv(t.currentTarget).attr("data-nta")!==this.selectedNTA&&n.Ltv(t.currentTarget).attr("stroke-width",.5),this.handleTooltip(t,e)})).on("click",((t,e)=>{this.showSidebar(e.properties.NTA2020,e.properties.neighborhood,"Additional information about this neighborhood.")}))},renderFilteredCircles(t){const e=n.Ltv(this.$refs.svg),o=n.bAh().fitSize([e.node().getBoundingClientRect().width,e.node().getBoundingClientRect().height],this.geojsonData);e.selectAll("circle").remove(),e.selectAll("circle").data(t).enter().append("circle").attr("cx",(t=>o([t.lon,t.lat])[0])).attr("cy",(t=>o([t.lon,t.lat])[1])).attr("r",2).attr("fill","black")},showSidebar(t,e,o){const a=n.Ltv(this.$refs.svg);a.selectAll("path").filter((t=>t.properties.NTA2020===this.selectedNTA)).attr("stroke-width",.5),a.selectAll("path").filter((e=>e.properties.NTA2020===t)).attr("stroke-width",2),this.selectedNTA=t;const i=this.jsonData.find((e=>e.NTA2020===t)),r=i?i.neighborhood:"Unknown Neighborhood",s=i?i.borough:"Unknown Borough";this.filteredNeighborhoodData=this.jsonData.filter((e=>e.NTA2020===t)),this.filteredDemographicData=this.demographicData?this.demographicData.find((e=>e.GeoID===t)):null,this.sidebarTitle=`${r}`,this.sidebarContent=`${s} <br> ${o}`,this.sidebarVisible=!0,this.$refs.mapSidebar.zoomToNeighborhood()},closeSidebar(){this.sidebarVisible=!1,this.selectedNTA=null,this.renderGeoJSON(),console.log("sidebarVisible:",this.sidebarVisible)},handleTooltip(t,e){const o=n.Ltv(this.$refs.tooltip);"mouseover"===t.type?o.style("display","block").html(`<strong>${e.properties.NTAName}</strong>`):"mousemove"===t.type?o.style("left",`${t.clientX+2}px`).style("top",`${t.clientY+2}px`):"mouseout"===t.type&&o.style("display","none")},highlightByFont(t){if(!this.jsonData||!this.geojsonData)return;this.selectedFilter=t;const e=this.jsonData.filter((e=>e.fonts&&e.fonts.includes(t)));this.renderFilteredCircles(e)},highlightByColor(t){if(!this.jsonData||!this.geojsonData)return;this.selectedFilter=t;const e=this.jsonData.filter((e=>e.colors&&e.colors.includes(t))).map((t=>t.NTA2020));this.highlightPolygons(e,t);const o=this.jsonData.filter((e=>e.colors&&e.colors.includes(t)));this.renderFilteredCircles(o)},highlightPolygons(t,e){const o=n.Ltv(this.$refs.svg),a=t.map((t=>t.toLowerCase()));o.selectAll("path").attr("fill","#ccc"),o.selectAll("path").filter((t=>{const e=t.properties.NTA2020?.toLowerCase();return a.includes(e)})).attr("fill",e)}}};const ft=(0,c.A)(mt,[["render",nt],["__scopeId","data-v-04b6bed2"]]);var vt=ft;const bt={style:{display:"flex","flex-direction":"column",height:"100vh"}};function yt(t,e,o,a,r,n){return(0,i.uX)(),(0,i.CE)("div",bt,e[0]||(e[0]=[(0,i.Lk)("div",{style:{"flex-grow":"1"}},null,-1),(0,i.Lk)("div",null,[(0,i.Lk)("img",{src:"img/stores.png",width:"100%",style:{margin:"auto"}})],-1)]))}var Dt={name:"OutroSection",props:{text:String}};const kt=(0,c.A)(Dt,[["render",yt],["__scopeId","data-v-3107009e"]]);var wt=kt,jt={name:"App",components:{Intro:h,OverView:G,DemographicRace:U,MapSection:vt,Outro:wt},data(){return{jsonData:[],geojsonData:[],demographicData:[]}},async mounted(){this.jsonData=await this.loadJSON(),this.geojsonData=await this.loadGeoJSON(),this.demographicData=await this.loadDemographicData()},methods:{async loadJSON(){try{const t=await fetch("/main_df.json");if(!t.ok)throw new Error("Failed to fetch words.json");const e=await t.json();return e}catch(t){return console.error("Error loading JSON:",t),null}},async loadGeoJSON(){try{const t=await fetch("/neighborhoods.json");if(!t.ok)throw new Error("Failed to fetch neighborhoods.json");const e=await t.json();return e}catch(t){return console.error("Error loading GeoJSON:",t),null}},async loadDemographicData(){try{const t=await fetch("/demographic.csv");if(!t.ok)throw new Error(`Failed to fetch demographic.csv: ${t.statusText}`);const e=await t.text(),o=n.swJ(e);return o}catch(t){return console.error("Error loading demographic data:",t),[]}}}};const St=(0,c.A)(jt,[["render",r]]);var Lt=St,Ct=o(7318);const At=(0,a.Ef)(Lt);At.use(Ct.A),At.mount("#app")}},e={};function o(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=t,function(){var t=[];o.O=function(e,a,i,r){if(!a){var n=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((function(t){return o.O[t](a[l])}))?a.splice(l--,1):(s=!1,r<n&&(n=r));if(s){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,n=a[0],s=a[1],l=a[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(l)var d=l(o)}for(e&&e(a);c<n.length;c++)r=n[c],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(d)},a=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(9659)}));a=o.O(a)})();
//# sourceMappingURL=app.45576308.js.map