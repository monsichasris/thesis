(function(){"use strict";var e={7604:function(e,t,o){var r=o(3751),n=o(641);function a(e,t,o,r,a,s){const i=(0,n.g2)("Intro"),l=(0,n.g2)("NameCluster"),c=(0,n.g2)("MapBase");return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[0]||(t[0]=(0,n.Lk)("img",{alt:"title",src:"img/title.png",width:"100%"},null,-1)),(0,n.Lk)("section",null,[(0,n.bF)(i)]),(0,n.Lk)("section",null,[(0,n.bF)(l,{csvData:a.csvData},null,8,["csvData"])]),(0,n.Lk)("section",null,[(0,n.bF)(c,{accessToken:a.mapboxAccessToken,center:[40.7128,-74.006],zoom:12},null,8,["accessToken"])]),t[1]||(t[1]=(0,n.Lk)("section",null,"Thank you",-1)),t[2]||(t[2]=(0,n.Lk)("footer",null,null,-1))],64)}function s(e,t,o,r,a,s){return t[0]||(t[0]=(0,n.Fv)('<div style="height:100vh;position:sticky;top:0;" data-v-2a7355ec><img src="img/basket.svg" style="position:absolute;transform:translate(-50%, 0%);bottom:0;left:50%;z-index:-1;" data-v-2a7355ec></div><div class="scroll" data-v-2a7355ec><p class="textbox" data-v-2a7355ec> If you live in the city, going to the grocery store is a part of life—whether you enjoy it or not. But have you ever really looked at the signs? Noticed something unusual? Felt drawn to one in particular? These signs tell a story more than you think. </p><p class="textbox" data-v-2a7355ec> For me, exploring grocery stores is a way to understand a place, what people eat and how they live. In NYC, there are over 10,000 grocery stores, each reflecting different foods, cuisines, and cultures. What do they reveal about the people here?<br data-v-2a7355ec> Let’s take a closer look. </p><p class="textbox" data-v-2a7355ec>What we will explore on grocery store signs</p><img src="img/explain-sign.png" width="60%" style="margin-top:-320px;transform:translate(-50%, 0%);margin-left:50%;" data-v-2a7355ec><p class="textbox" data-v-2a7355ec> These are the key elements of brand identity that shape how a store presents itself. But beyond branding, do these signs also reflect the identities of the people and cultures they serve? </p></div>',2))}var i={name:"IntroSection",props:{text:String}},l=o(6262);const c=(0,l.A)(i,[["render",s],["__scopeId","data-v-2a7355ec"]]);var u=c,d=o(33);const h=["value"],p={key:0,ref:"wordCloudContainer",class:"word-cloud-grid"},y={key:2};function m(e,t,o,a,s,i){return(0,n.uX)(),(0,n.CE)("div",null,[t[5]||(t[5]=(0,n.Lk)("h1",null,"Groups",-1)),t[6]||(t[6]=(0,n.Lk)("label",{for:"groupBy"},"Group By:",-1)),(0,n.bo)((0,n.Lk)("select",{id:"groupBy","onUpdate:modelValue":t[0]||(t[0]=e=>s.state.groupBy.selected=e),onChange:t[1]||(t[1]=(...e)=>i.updateChart&&i.updateChart(...e))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.state.groupBy.menu,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,d.v_)(e),9,h)))),128))],544),[[r.u1,s.state.groupBy.selected]]),s.countyGroups.length&&"counties"===s.currentView?((0,n.uX)(),(0,n.CE)("div",p,null,512)):(0,n.Q3)("",!0),s.selectedNeighborhood?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"modal-overlay",onClick:t[4]||(t[4]=(...e)=>i.closeModal&&i.closeModal(...e))},[(0,n.Lk)("div",{class:"modal-content",onClick:t[3]||(t[3]=(0,r.D$)((()=>{}),["stop"]))},[(0,n.Lk)("h2",null,(0,d.v_)(s.selectedNeighborhood.county),1),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.selectedNeighborhood.names,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e},(0,d.v_)(e),1)))),128))]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.closeModal&&i.closeModal(...e))},"Close")])])):((0,n.uX)(),(0,n.CE)("p",y,"No groups found"))])}o(4114),o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698),o(8992),o(4520),o(670),o(3949),o(1454);var g=o(1732),f=o(5084),v=o.n(f),b=o(8771),C=o(5300),w={name:"NameCluster",props:["csvData"],data(){return{groups:[],countyGroups:[],currentView:"counties",state:{data:[],groupBy:{menu:["name","font","colors"],selected:"name"}},synonymCache:{},selectedNeighborhood:null}},watch:{currentView(e){"counties"===e&&this.countyGroups.length&&this.$nextTick((()=>{this.createCountyBubbleChart()}))},csvData(e){e&&this.processCSV(e)},countyGroups(e){e.length&&"counties"===this.currentView&&this.$nextTick((()=>{this.createCountyBubbleChart()}))}},methods:{setView(e){this.currentView=e},updateChart(){console.log("Grouping by:",this.state.groupBy.selected),"name"===this.state.groupBy.selected?this.prepareDataByName():"font"===this.state.groupBy.selected?this.prepareDataByFont():"colors"===this.state.groupBy.selected&&this.prepareDataByColors()},async fetchSynonyms(e){if(this.synonymCache[e])return this.synonymCache[e];try{const t=await fetch(`https://api.datamuse.com/words?rel_spc=${e}`),o=await t.json(),r=o.map((e=>e.word));return this.synonymCache[e]=r,r}catch(t){return console.error(`Error fetching synonyms for "${e}":`,t),[]}},async processSharedWords(e,t){const o=b.z.tokenize(e.toLowerCase()),r=["grocery","groceries","deli","gourmet","supermarket","market","marketplace","food","minimart","mini","mart","store","shop"];for(const n of o){if(b.z.isStopWord(n)||r.includes(n))continue;const o=await this.fetchSynonyms(n),a=n;t[a]||(t[a]={names:[],synonyms:[]}),t[a].names.push(e),t[a].synonyms=[...new Set([...t[a].synonyms,...o])]}},async processCSV(e){if(!e)return void console.error("Empty or invalid CSV data");const t=e.split(/\r?\n/).map((e=>e.split(","))),o=t[0],r=o.indexOf("Normalized DBA Name"),n=o.indexOf("Neighborhood"),a=o.indexOf("County"),s=o.indexOf("Is Chain Store"),i=o.indexOf("License Number"),l={},c={},u=new Set,d={};for(let y=1;y<t.length;y++){const e=t[y][r]?.trim(),o=t[y][n]?.trim(),h=t[y][a]?.trim(),p=t[y][i]?.trim(),m="yes"===t[y][s]?.trim().toLowerCase();if((!m||!u.has(e))&&(m&&u.add(e),e&&o&&h&&p)){await this.processSharedWords(e,l),c[o]||(c[o]={}),await this.processSharedWords(e,c[o]);const t=`/street_view_images/${h}/${p}.jpg`;console.log("Processing image:",t);const r=await this.extractColors(t);d[h]||(d[h]={}),d[h][p]=r}}const h=Object.entries(l).map((([e,t])=>({sharedWord:e,names:t.names,synonyms:t.synonyms}))),p=Object.entries(c).map((([e,t])=>({county:e,children:Object.entries(t).map((([e,t])=>({sharedWord:e,size:t.names.length,names:t.names,synonyms:t.synonyms})))})));console.log("Final County Groups:",p),console.log("Final Color Map:",d),this.groups=[...h],this.countyGroups=[...p],this.colorMap=d},async extractColors(e){try{const t=await C.j.from(e).getPalette();return Object.values(t).filter((e=>e)).map((e=>e.getHex()))}catch(t){return console.error(`Error extracting colors from ${e}:`,t),[]}},async testExtractColors(){const e="./street_view_images/KINGS/610009.jpg";console.log("Testing image path:",e);const t=await this.extractColors(e);console.log("Extracted colors:",t)},mounted(){this.testExtractColors()},showNeighborhoodNames(e){console.log("Neighborhood clicked:",e.county);const t=[...new Set(e.names)],o=e.words?e.words.flatMap((e=>e.text)):[];this.selectedNeighborhood={county:e.county,names:t,synonyms:o}},closeModal(){this.selectedNeighborhood=null},prepareDataByName(){console.log("Preparing data grouped by name..."),this.state.data=this.groups.map((e=>({name:e.sharedWord,size:e.names.length}))),console.log("Data grouped by name:",this.state.data),this.createBubbleChart()},prepareDataByFont(){this.state.data=[{name:"Arial",size:10},{name:"Helvetica",size:15},{name:"Times New Roman",size:20}],console.log("Data grouped by font:",this.state.data),this.createBubbleChart()},prepareDataByColors(){this.state.data=this.countyGroups.map((e=>({county:e.county,colors:e.children.flatMap((t=>this.colorMap[e.county][t.sharedWord]||[]))}))),console.log("Data grouped by colors:",this.state.data),this.createColorChart()},createCountyBubbleChart(){const e=g.Ltv(this.$refs.wordCloudContainer);e.selectAll("*").remove();const t=this.countyGroups.map((e=>({county:e.county,words:e.children.map((e=>({text:e.sharedWord,size:10*e.size}))),names:e.children.flatMap((e=>e.names))}))),o=Math.floor((this.$refs.wordCloudContainer.clientWidth-16)/5),r=o;t.forEach((t=>{const n=e.append("svg").attr("width",o).attr("height",r).style("border","1px solid #ccc").style("margin","0").on("click",(()=>{this.showNeighborhoodNames(t)}));n.append("text").attr("x",o/2).attr("y",20).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text(t.county);const a=v()().size([o,r]).words(t.words).padding(5).rotate((()=>Math.random()>.5?0:90)).fontSize((e=>e.size)).on("end",(e=>{n.append("g").attr("transform",`translate(${o/2}, ${r/2})`).selectAll("text").data(e).enter().append("text").style("font-size",(e=>`${e.size}px`)).style("fill","#000").attr("text-anchor","middle").attr("transform",(e=>`translate(${e.x}, ${e.y}) rotate(${e.rotate})`)).text((e=>e.text))}));a.start()}))},createColorChart(){const e=g.Ltv(this.$refs.wordCloudContainer);e.selectAll("*").remove(),this.state.data.forEach((t=>{const o=e.append("div").style("margin","10px").style("border","1px solid #ccc").style("padding","10px");o.append("h3").text(t.county);const r=o.append("div").style("display","flex").style("flex-wrap","wrap").style("gap","10px");t.colors.forEach((e=>{r.append("div").style("width","50px").style("height","50px").style("background-color",e).style("border","1px solid #000")}))}))}}};const x=(0,l.A)(w,[["render",m]]);var k=x;const N={id:"map",ref:"mapContainer",class:"map-container"};function B(e,t,o,r,a,s){return(0,n.uX)(),(0,n.CE)("div",N,null,512)}var S=o(842),z=o.n(S),M={name:"MapBase",props:{accessToken:{type:String,required:!0},center:{type:Array,default:()=>[40,-74.5]},zoom:{type:Number,default:10}},data(){return{map:null}},mounted(){this.initializeMap()},beforeUnmount(){this.map&&this.map.remove()},methods:{initializeMap(){z().accessToken=this.accessToken,this.map=new(z().Map)({container:this.$refs.mapContainer,style:"mapbox://styles/monsicha/cm8qhxet2002y01qkbtph7hz6",center:this.center,zoom:this.zoom}),this.map.on("load",(()=>{console.log("Map loaded successfully!"),console.log("Map style:",this.map.getStyle())})),this.map.on("error",(e=>{console.error("Mapbox error:",e.error.message)}))}}};const j=(0,l.A)(M,[["render",B]]);var O=j,E={name:"App",components:{Intro:u,NameCluster:k,MapBase:O},data(){return{csvData:null,mapboxAccessToken:"pk.eyJ1IjoibW9uc2ljaGEiLCJhIjoiY2t1Z2Z2MXV1MjNtYzJucXBjYmwxNnpkNSJ9.e2G2z3OlPked0RO2kHnWlw"}},async mounted(){this.csvData=await this.loadCSV()},methods:{async loadCSV(){try{const e=await fetch("Filtered_Grocery_Neighborhoods.csv"),t=await e.text();return t}catch(e){return console.error("Error loading CSV:",e),null}}}};const L=(0,l.A)(E,[["render",a]]);var D=L;(0,r.Ef)(D).mount("#app")}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=e,function(){var e=[];o.O=function(t,r,n,a){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],a=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(i=!1,a<s&&(s=a));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,s=r[0],i=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var u=l(o)}for(t&&t(r);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(7604)}));r=o.O(r)})();
//# sourceMappingURL=app.e5238cdc.js.map